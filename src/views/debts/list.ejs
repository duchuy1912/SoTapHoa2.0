<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>S·ªï ghi n·ª£</title>
  <style>
    body {
  font-family: "Segoe UI", Arial, sans-serif;
  background: #f3f4f6;
  margin: 0;
}

h2 {
  margin: 20px;
}

.btn {
  padding: 7px 14px;
  border-radius: 6px;
  color: #fff;
  text-decoration: none;
  font-size: 14px;
  border: none;
  cursor: pointer;
}

.btn-add { background: #22c55e; margin-left:20px; }
.btn-edit { background: #2563eb; }
.btn-del  { background: #dc2626; }

.btn:hover { opacity: 0.85; }

table {
  width: calc(100% - 40px);
  margin: 20px;
  border-collapse: collapse;
  background: #fff;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 10px 20px rgba(0,0,0,.08);
}

th {
  background: #111827;
  color: #fff;
  padding: 12px;
  font-size: 14px;
}

td {
  border-bottom: 1px solid #eee;
  padding: 10px 12px;
  font-size: 14px;
}

tr:hover { background: #f9fafb; }

.thumb {
  /* width: 70px; */
  height: 70px;
  object-fit: cover;
  border-radius: 8px;
  cursor: pointer;
  transition: .2s;
}

.thumb:hover { transform: scale(1.05); }

/* Preview full m√†n h√¨nh */
#previewBox {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.85);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
}

#previewBox img {
  max-width: 90%;
  max-height: 90%;
  border-radius: 10px;
  box-shadow: 0 0 30px rgba(0,0,0,.5);
}



  </style>
</head>
<body>
<%- include('../partials/navbar') %>

<h2>üìí S·ªï ghi n·ª£</h2>
<a class="btn btn-add" href="/debts/create">‚ûï Th√™m ghi n·ª£</a>
<br><br>

<table>
<tr>
  <th>·∫¢nh</th>
  <th>T√™n kh√°ch</th>
  <th>SƒêT</th>
  <th>S·ªë ti·ªÅn</th>
  <th>Ghi ch√∫</th>
  <th>Ng√†y</th>
  <th>H√†nh ƒë·ªông</th>
</tr>

<% debts.forEach(d => { %>
<tr>
  <td>
    <% if(d.image_url){ %>
      <img src="<%= d.image_url %>" class="thumb" onclick="openPreview('<%= d.image_url %>')">

    <% } %>
  </td>
  <td><%= d.customer_name %></td>
  <td><%= d.phone %></td>
  <td style="color:red;font-weight:bold">
    <%= Number(d.total_money).toLocaleString() %> ƒë
  </td>
  <td><%= d.note %></td>
  <td><%= new Date(d.created_at).toLocaleDateString() %></td>
  <td>
    <a class="btn btn-edit" href="/debts/edit/<%= d.id %>">‚úèÔ∏è</a>
    <form method="POST" action="/debts/delete/<%= d.id %>" style="display:inline">
      <button class="btn btn-del">üóë</button>
    </form>
  </td>
</tr>
<% }) %>

</table>
<script>
function openPreview(src){
  document.getElementById("previewImg").src = src;
  document.getElementById("previewBox").style.display = "flex";
}
function closePreview(){
  document.getElementById("previewBox").style.display = "none";
}
</script>
<div id="previewBox" onclick="closePreview()">
  <img id="previewImg">
</div>
</body>
</html>
