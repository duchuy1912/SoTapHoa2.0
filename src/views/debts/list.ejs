<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Sá»• ghi ná»£</title>
  <style>
    body { font-family: Arial;  background:#f3f4f6; margin: 0; }
    table { width:100%; border-collapse:collapse; background:#fff }
    th,td { border:1px solid #ddd; padding:10px; text-align:left }
    th { background:#222; color:#fff }
    img { width:80px; border-radius:6px }
    .btn { padding:6px 10px; border-radius:5px; color:#fff; text-decoration:none }
    .btn-add { background:#22c55e }
    .btn-edit { background:#2563eb }
    .btn-del { background:#dc2626; border:none }
    .thumb{
  cursor:pointer;
  transition:.2s;
}
.thumb:hover{
  transform:scale(1.05);
}

#previewBox{
  position:fixed;
  top:0; left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.8);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:9999;
}

#previewBox img{
  width:100%;
  height:100%;
  object-fit:contain;
  border-radius:0;
}


  </style>
</head>
<body>
<%- include('../partials/navbar') %>

<h2>ğŸ“’ Sá»• ghi ná»£</h2>
<a class="btn btn-add" href="/debts/create">â• ThÃªm ghi ná»£</a>
<br><br>

<table>
<tr>
  <th>áº¢nh</th>
  <th>TÃªn khÃ¡ch</th>
  <th>SÄT</th>
  <th>Sá»‘ tiá»n</th>
  <th>Ghi chÃº</th>
  <th>NgÃ y</th>
  <th>HÃ nh Ä‘á»™ng</th>
</tr>

<% debts.forEach(d => { %>
<tr>
  <td>
    <% if(d.image_url){ %>
      <img src="<%= d.image_url %>" class="thumb" onclick="openPreview('<%= d.image_url %>')">

    <% } %>
  </td>
  <td><%= d.customer_name %></td>
  <td><%= d.phone %></td>
  <td style="color:red;font-weight:bold">
    <%= Number(d.total_money).toLocaleString() %> Ä‘
  </td>
  <td><%= d.note %></td>
  <td><%= new Date(d.created_at).toLocaleDateString() %></td>
  <td>
    <a class="btn btn-edit" href="/debts/edit/<%= d.id %>">âœï¸</a>
    <form method="POST" action="/debts/delete/<%= d.id %>" style="display:inline">
      <button class="btn btn-del">ğŸ—‘</button>
    </form>
  </td>
</tr>
<% }) %>

</table>
<script>
function openPreview(src){
  document.getElementById("previewImg").src = src;
  document.getElementById("previewBox").style.display = "flex";
}
function closePreview(){
  document.getElementById("previewBox").style.display = "none";
}
</script>
<div id="previewBox" onclick="closePreview()">
  <img id="previewImg">
</div>
</body>
</html>
